<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - NextGen AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/account.css') }}">
</head>
<body>
    <!-- Include sidebar component -->
    {% include 'components/sidebar.html' %}

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <div class="layout-with-sidebar">
        <main class="account-main">
            <div class="container">
                <div class="account-header">
                    <h1 class="account-title">My Account</h1>
                    <p class="account-description">Manage your profile and marketing preferences</p>
                </div>

                <div class="account-grid">
                    <!-- Profile Information -->
                    <div class="account-card">
                        <div class="card-header">
                            <h2 class="card-title">Profile Information</h2>
                            <p class="card-description">Update your personal details</p>
                        </div>

                        <form id="profileForm" class="account-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="full_name" class="form-label">Full Name</label>
                                    <input type="text" id="full_name" name="full_name" class="form-input" value="{{ user.full_name or '' }}" placeholder="John Doe">
                                </div>

                                <div class="form-group">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" id="email" name="email" class="form-input" value="{{ user.email }}" disabled>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone" class="form-label">Phone</label>
                                    <input type="tel" id="phone" name="phone" class="form-input" value="{{ user.phone or '' }}" placeholder="+1 (555) 000-0000">
                                </div>

                                <div class="form-group">
                                    <label for="job_title" class="form-label">Job Title</label>
                                    <input type="text" id="job_title" name="job_title" class="form-input" value="{{ user.job_title or '' }}" placeholder="Marketing Manager">
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Company Information -->
                    <div class="account-card">
                        <div class="card-header">
                            <h2 class="card-title">Company Information</h2>
                            <p class="card-description">Tell us about your business</p>
                        </div>

                        <form id="companyForm" class="account-form">
                            <div class="form-group">
                                <label for="company" class="form-label">Company Name</label>
                                <input type="text" id="company" name="company" class="form-input" value="{{ user.company or '' }}" placeholder="Acme Inc.">
                            </div>

                            <div class="form-group">
                                <label for="website" class="form-label">Website</label>
                                <input type="url" id="website" name="website" class="form-input" value="{{ user.website or '' }}" placeholder="https://example.com">
                            </div>

                            <!-- Added linkedin field -->
                            <div class="form-group">
                                <label for="linkedin" class="form-label">LinkedIn</label>
                                <input type="url" id="linkedin" name="linkedin" class="form-input" value="{{ user.linkedin or '' }}" placeholder="https://linkedin.com/in/you">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="industry" class="form-label">Industry</label>
                                    <select id="industry" name="industry" class="form-input">
                                        <option value="">Select industry</option>
                                        <option value="technology" {% if user.industry == 'technology' %}selected{% endif %}>Technology</option>
                                        <option value="healthcare" {% if user.industry == 'healthcare' %}selected{% endif %}>Healthcare</option>
                                        <option value="finance" {% if user.industry == 'finance' %}selected{% endif %}>Finance</option>
                                        <option value="retail" {% if user.industry == 'retail' %}selected{% endif %}>Retail</option>
                                        <option value="education" {% if user.industry == 'education' %}selected{% endif %}>Education</option>
                                        <option value="manufacturing" {% if user.industry == 'manufacturing' %}selected{% endif %}>Manufacturing</option>
                                        <option value="other" {% if user.industry == 'other' %}selected{% endif %}>Other</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="company_size" class="form-label">Company Size</label>
                                    <select id="company_size" name="company_size" class="form-input">
                                        <option value="">Select size</option>
                                        <option value="1-10" {% if user.company_size == '1-10' %}selected{% endif %}>1-10 employees</option>
                                        <option value="11-50" {% if user.company_size == '11-50' %}selected{% endif %}>11-50 employees</option>
                                        <option value="51-200" {% if user.company_size == '51-200' %}selected{% endif %}>51-200 employees</option>
                                        <option value="201-500" {% if user.company_size == '201-500' %}selected{% endif %}>201-500 employees</option>
                                        <option value="501+" {% if user.company_size == '501+' %}selected{% endif %}>501+ employees</option>
                                    </select>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Marketing Goals -->
                    <div class="account-card account-card-full">
                        <div class="card-header">
                            <h2 class="card-title">Marketing Goals</h2>
                            <p class="card-description">Help us understand your marketing objectives</p>
                        </div>

                        <form id="goalsForm" class="account-form">
                            <div class="form-group">
                                <label for="marketing_goals" class="form-label">What are your primary marketing goals?</label>
                                <textarea id="marketing_goals" name="marketing_goals" class="form-textarea" rows="6" placeholder="e.g., Increase brand awareness, generate more leads, improve content engagement...">{{ user.marketing_goals or '' }}</textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Account Stats -->
                    <div class="account-card">
                        <div class="card-header">
                            <h2 class="card-title">Account Overview</h2>
                            <p class="card-description">Your account statistics</p>
                        </div>

                        <div class="stats-list">
                            <div class="stat-item-small">
                                <span class="stat-label-small">Member Since</span>
                                <!-- Fixed created_at to handle string format from database -->
                                <span class="stat-value-small">
                                    {% if user.created_at %}
                                        {% if user.created_at is string %}
                                            {{ user.created_at[:7] }}
                                        {% else %}
                                            {{ user.created_at.strftime('%B %Y') }}
                                        {% endif %}
                                    {% else %}
                                        Recently
                                    {% endif %}
                                </span>
                            </div>
                            <div class="stat-item-small">
                                <span class="stat-label-small">Account Status</span>
                                <span class="stat-value-small status-active">Active</span>
                            </div>
                            <div class="stat-item-small">
                                <span class="stat-label-small">Plan</span>
                                <span class="stat-value-small">Free Trial</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/account.js') }}"></script>
</body>
</html>
